const p=document.getElementById("menuToggle"),E=document.getElementById("menuLateral"),S=document.getElementById("cerrarMenu"),f=document.getElementById("btnSearch"),l=document.getElementById("searchSubnav"),q=document.getElementById("panelCategorias"),k=document.getElementById("panelFiltros"),o=document.getElementById("overlayGlobal"),r=document.getElementById("overlayCatalogo");let a=0;function b(){a=window.scrollY,document.documentElement.style.overflowAnchor="none",document.documentElement.classList.add("bloqueado"),document.body.classList.add("bloqueado"),document.documentElement.scrollTop=a,document.body.scrollTop=a}function d(){document.documentElement.classList.remove("bloqueado"),document.body.classList.remove("bloqueado"),document.documentElement.style.overflowAnchor="",window.scrollTo(0,a)}function L(e){const t=getComputedStyle(document.documentElement),s=t.getPropertyValue("--navbar-altura").trim(),m=t.getPropertyValue("--subnav-altura").trim();document.body.classList.contains("tiene-subnav")?e.style.top=`calc(${s} + ${m})`:e.style.top=s}function y(){E?.classList.remove("abierto")}function i(){l?.classList.remove("visible"),document.body.classList.remove("search-abierta")}function u(){q?.classList.remove("abierto"),k?.classList.remove("abierto"),r?.classList.remove("visible")}function h(){y(),i(),u(),o.classList.remove("visible"),document.body.classList.remove("search-abierta"),d()}p?.addEventListener("click",()=>{i(),u(),L(o),o.classList.add("visible"),E.classList.add("abierto"),b()});S?.addEventListener("click",h);o?.addEventListener("click",h);f?.addEventListener("click",()=>{y(),u(),l.classList.toggle("visible")?(document.body.classList.add("search-abierta"),document.body.classList.remove("nav-hidden"),document.body.offsetHeight,L(o),o.classList.add("visible"),b()):(document.body.classList.remove("search-abierta"),o.classList.remove("visible"),d())});document.addEventListener("click",e=>{if(!l?.classList.contains("visible"))return;const t=l.contains(e.target),s=f.contains(e.target);!t&&!s&&(i(),o.classList.remove("visible"),d())});function w(e){i(),y(),L(r),r.classList.add("visible"),e.classList.add("abierto"),b()}r?.addEventListener("click",()=>{u(),d()});document.querySelectorAll("[data-open]").forEach(e=>{e.addEventListener("click",()=>{const t=document.querySelector(e.dataset.open);w(t)})});let g=0,c=0;window.addEventListener("scroll",()=>{if(document.body.classList.contains("bloqueado"))return;const e=window.scrollY,t=e-g;c+=t,c>50&&(document.body.classList.add("nav-hidden"),c=0),c<-25&&(document.body.classList.remove("nav-hidden"),c=0),g=e});const n=document.querySelectorAll("#carruselMatriz .slide");let v=0;function B(){n.forEach(e=>e.classList.remove("activa")),n[v].classList.add("activa"),v=(v+1)%n.length}n.length>0&&(n[0].classList.add("activa"),setInterval(B,4e3));document.querySelectorAll("[data-carrusel]").forEach(e=>{const t=e.querySelector(".car-track"),s=e.querySelector("[data-prev]"),m=e.querySelector("[data-next]");s.addEventListener("click",()=>{t.scrollLeft-=200}),m.addEventListener("click",()=>{t.scrollLeft+=200})});
